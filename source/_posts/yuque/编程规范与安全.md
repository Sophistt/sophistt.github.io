---
title: 编程规范与安全
urlname: swgrkyhqolzxiykd
date: '2023-01-28 17:55:37 +0800'
tags: []
categories: []
---

## 规范

#### 语法

1. 空行：变量命名之间有空行。
2. 泛型变量命名：单个大写字符，可接一个数字，例如 E, T, T2

```java
public class Box<T2>
```

3. 避免文件过长，不超过 2000 行（非空非注释行）
4. 避免方法过长，不超过 50 行（非空非注释行），参数不超过 5 个，异常种类不超过 5 个。
5. 嵌套不要超过 4 层
6. 提交的代码重复率小于 10%。

## License

在编程中，如果使用到了别人提供的代码或库，则涉及到开源许可（license）的问题，需要关注该代码使用的是什么 license。根据 license 的严格程度可以分为：MIT > BSD > Apache > MPL> LGPL > GPL

- 修改源码后可以闭源：MIT, BSD, Apache
- MPL：涉及 MPL 部分的代码以及修改了 MPL 的代码需要开源，自己的代码可以闭源。
- 通过动态链接的代码不需要开源，如果静态链接一个基于 LGPL 的库，则需要开放使用了该库的所有代码
- 使用源码后，新增源码也要使用该协议：GPL（具有传染性）

## 加密算法

### 安全

- RSA：密钥长度 > 2048
- DSA：用于证书密钥/数字签名
- ECDSA：用于证书密钥/数字签名
- 加入盐值的 SHA256

### 不安全

- DES：在所有场景下都不安全。
- MD5：不应用于数字签名或密码加密。
- AES-ECB

## Java 安全管理器（SecurityManager）

当运行未知的 Java 程序的时候，该程序可能有恶意代码（删除系统文件、重启系统等），为了防止运行恶意代码对系统产生影响，需要对运行的代码的权限进行控制，这时候就要启用 Java 安全管理器。

### 启动方式

```bash
-Djava.security.manager
```

```java
System.setSecurityManager(new SecurityManager());
```

### 配置基本原则

1. 没有配置的权限表示没有。
2. 只能配置有什么权限，不能配置禁止做什么。
3. 同一种权限可多次配置，取并集。
4. 统一资源的多种权限可用逗号分割。

### 用途

1. SecurityManager 可以用来控制监听端口，控制是否自己停止线程，控制能否读取系统参数，控制加载某些类。

## 漏洞攻击

### 命令注入

- 可能导致命令注入的字符：|、;、&、$、>、<、`、\、!、\n
